<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html>
<head><title>Dependency Injection</title>
</head>
<body>
<p>See Martin Fowlers's <a href="http://www.martinfowler.com/articles/injection.html">Inversion
    of Control Containers and the Dependency Injection</a> article
    from 2003 for a thorough description. Surely everyone has read this by
    now?</p>

<p>Very
    quickly: Dependency Injection is where components are given their
    dependencies through their constructors, methods, or directly into
    fields. Those components do not get their dependencies
    themselves, or instantiate them directly. This is very much
    related to the encompassing design principle <a href="inversion-of-control.html">Inversion of Control</a>.
</p>

<h2>Different types of Dependency Injection supported by
    PicoContainer </h2>

<p>PicoContainer
    supports multiple ways to specify the injection of dependencies into
    components. Constructor injection (listed first) is the
    recomended idiom for PicoContainer. Other types leverage
    fields
    and methods. Variations of the method types, can follow a
    naming
    convention or be marked with an annotation.Dependencies for
    those could be populated one by one, or all in one method call. Indeed
    components could be populated with combinations of Constructor, Method
    and Field Injection.</p>

<h3>Constructor Injection </h3>

<p>This is where a component has a constructor, with arguments
    that are its dependencies:</p>

<div class="source">
<pre>
public class Apple {
    private final Orange orange;
    private final Pear pear;
    private final Banana banana;
	
    public Apple(Orange orange, Pear pear, Banana banana) {
        this.orange = orange;
        this.pear = pear;
        this.banana = banana;
    }
	
    // methods
}</pre>
</div>
<h4>Usage</h4>

<div class="source">
<pre>pico = new DefaultPicoContainer(new ConstructorInjection());
pico.addComponent(Apple.class);
// etc
Apple apple = pico.getComponent(Apple.class);</pre>
</div>
<p>Constructor Injection, is a default too (via AdaptiveInjection):</p>

<div class="source">
<pre>pico = new DefaultPicoContainer();
pico.addComponent(Apple.class);
// etc
Apple apple = pico.getComponent(Apple.class);</pre>
</div>
<p>
    The PicoContainer team recommends Constructor Dependency Injection
    (CDI) over other types - the project was started to pioneer this
    approach. With PicoContainer is no need
    to mark up the constructor with an annotation. Having more than one
    constructor is OK too, as PicoContainer will try to use the one with
    the most arguments and fall back to ones with fewer if it cannot
    satisfy the longer ones.</p>

<p>The component factory for this is <strong>ConstructorInjection</strong>.
    It only handles constructor injection types of components. Factory <strong>AdaptiveInjection</strong>
    defaults to constructor injection, after checking first to see it the
    component in question is a Annotated Method or Field type (see below).</p>

<p class="callout">Constructor Injection is idiomatic
    PicoContainer
    - choose this style over all others if you can - especially if you are
    starting out with Dependency Injection.</p>

<h3>Injecting into Setter Methods </h3>

<p>This is where a component has an empty constructor with
    dependencies provided by setters after instantiation:</p>

<div class="source">
<pre>
public class Apple {
    private Orange orange;
    private Pear pear;
    private Banana banana;
    public setOrange(Orange orange) {
        this.orange = orange;
    }
    public setPear(Pear pear) {
        this.pear = pear;
    }
    public setBanana(Banana banana) {
        this.banana = banana;
    }
   // other methods
}</pre>
</div>
<h4>Usage</h4>

<div class="source">
<pre>pico = new DefaultPicoContainer(new SetterInjection());
pico.addComponent(Apple.class);
// etc
Apple apple = pico.getComponent(Apple.class);</pre>
</div>
<p>If you want to use an prefix other than 'set'...</p>

<div class="source">
<pre>pico = new DefaultPicoContainer(new SetterInjection("mySynonymForSet"));
pico.addComponent(Apple.class);
// etc
Apple apple = pico.getComponent(Apple.class);</pre>
</div>
<p>Setter methods (those prefixed with 'set') may not be your
    preferred choice. You can force a different prefix to be choosable in
    PicoContainer, such as 'init' or 'inject'.</p>

<p>The component factory for this is <strong>SetterInjection</strong>.
    It only handles setter injection types of components.</p>

<p>Factory <strong>AdaptiveInjection</strong> can
    also handle setter injection types, though it requires that the
    component was registered with the <a href="properties.html">property</a>
    'SDI' in order to activate the Setter Injection functionality. <strong>AdaptiveInjection</strong>
    will also fall through to constructor injection if there is no SDI
    property. </p>


<h3>Where Next?</h3>
<span class="callout">
The&nbsp;<a href="behaviors.html">Modifying Behaviors</a>
page outlines the adding of behaviors to components</span>
</body>
</html>