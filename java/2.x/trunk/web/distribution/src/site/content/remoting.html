<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html>
<head>
<title>Pico Web Remoting</title>
</head>
<body>
<p>Pico Web Remoting (PWR) is where web requests can be bounded directly to methods in a class. All public methods are eligible, and method parameters are pulled from query-string or form post-fields for invocation. This technology is not a page technology as such, its for AJAX invoation of methods on the server side.</p>
<p>We have tried to make this as <strong>transparent as possible</strong>. This objects that can be published via PWR, are POJOs. It is up to you whether you interface/impl separate them, but be reminded that by default all public methods will be published.</p>
<p>Here is an example of web.xml for a PicoWebRemoting app:</p>
<div class="source"><pre>
	<web-app>
	  <display-name>Pico Web Remoting Demo</display-name>

	  <context-param>
	    <param-name>webapp-composer-class</param-name>
	    <param-value>org.picocontainer.web.sample.jqueryemailui.JQueryWebappComposer</param-value>
	  </context-param>

	  <filter>
	    <filter-name>picoFilter</filter-name>
        <filter-class>org.picocontainer.web.remoting.PicoWebRemotingServlet$ServletFilter</filter-class>
	  </filter>

	  <filter-mapping>
	    <filter-name>picoFilter</filter-name>
	    <url-pattern>/pwr/*</url-pattern>
	  </filter-mapping>

	  <listener>
        <listener-class>org.picocontainer.web.PicoServletContainerListener</listener-class>
	  </listener>

      <servlet>
        <servlet-name>PWR</servlet-name>
        <servlet-class>org.picocontainer.web.remoting.PicoWebRemotingServlet</servlet-class>
        <load-on-startup>1</load-on-startup>
        <init-param>
            <param-name>scopes_to_publish</param-name>
            <param-value>session,request</param-value>
        </init-param>
        <init-param>
            <param-name>package_prefix_to_strip</param-name>
            <param-value>org.picocontainer.web.sample.jqueryemailui</param-value>
        </init-param>
      </servlet>

      <servlet-mapping>
        <servlet-name>PWR</servlet-name>
        <url-pattern>/pwr/*</url-pattern>
      </servlet-mapping>

	  <welcome-file-list>
	    <welcome-file>index.html</welcome-file>
	  </welcome-file-list>

	</web-app>


</pre></div>
<h3>Limiting Scopes to Publish</h3>
<p>In the web.xml file, you can specify a 'scopes_to_publish' element that takes a comma separated list of scopes. One or more of 'application' , 'session' and 'request' (without the quotes). This listed will be analysed for publication as PWR invocable.</p>
<h3>Limiting Methods to Publish</h3>
<p>Only public method on components managed by PicoContainer are eligible. By default, all web methods (GET, POST, PUT, DELETE) are possible for a matching method. However there are annotations (in org.picocontainer.web) of the same name, that restrict down possibilities. If you want a component's method to be only available for POST, put a @POST annotation above it.</p>
<h3>Shortening URLs to objects.</h3>
<p>PWR by default will encode the whole class name including package. All dots in the package name are changed to slashes to make apparent directories, and the case of the Class name itself is preserved. With a web.xml element called 'package_prefix_to_strip' it is possible to eliminate a prefix for all of the objects published. Thus, you could essentially turn http://mycompany.com/r/com.mycompany/store/Cart/buy into http://mycompany.com/r/store/Cart/buy if you wanted.</p>
<h3>Binding objects to URLs - how it works</h3>
<p>In the demo app there a 'send' method on a class called 'Sent'. The class name and method name are encoded in the URL. The method parameters are pulled from the form post fields, and the reply is a JSON representation of the methods return type. Here are some screenshots from a Firefox plugin called 'HttpFox' and how the web request maps to the source method:</p>
<p><img src="images/PWR-POST.png" alt="post" name="post" width="871" height="804" id="post" /></p>
<p>A GET invocation is quite similar. Instead of form post-fields the parameters are mapped to query string parameters.</p>
<h2>Further reading.</h2>
<p>The Maven example project is <a
  href="http://svn.codehaus.org/picocontainer/java/2.x/trunk/web/examples/jquery-email/">here</a>. Make sure you make
  and configure your own <a href="composition.html">WebappComposer</a> implementation.</p>
<p>See <a href="downloads.html">downloads</a> on how to download the Pico Web Remoting jar either using Maven or by
downloading the full distribution.</p>
</body>
</html>