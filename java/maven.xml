<project
    default="jar-install"
    xmlns:j="jelly:core"
    xmlns:maven="jelly:maven"
    xmlns:ant="jelly:ant">

    <goal
        name="jar-install"
        description="Build each sub project into a jar">

        <property name="goals" value="jar:install"/>
        <attainGoal name="generic"/>

    </goal>

    <goal
        name="generic"
        description="Build each sub project with a particular goal. e.g. maven -Dgoals=site:deploy generic">

        <maven:reactor
            basedir="${basedir}"
            includes="*/project.xml"
            excludes="groovypico/*,picogui/*,picoidea/*"
            goals="${goals}"
            banner="Building"
            ignoreFailures="false"
            />
    </goal>

    <goal name="cleanall" description="Delete all target folders">
        <delete includeEmptyDirs="true">
            <fileset dir="${basedir}">
                <include name="*/target/**"/>
            </fileset>
        </delete>
    </goal>

    <goal name="site-deploy">
        <attainGoal name="multiproject"/>
        <attainGoal name="site:deploy"/>
    </goal>

</project>
