<project
  default="jar-install"
  xmlns:maven="jelly:maven">

  <goal 
    name="jar-install"
    description="Build each sub project into a jar">

    <maven:reactor
      basedir="${basedir}"
      includes="*/project.xml"
      excludes="picogui/*,picoidea/*"
      goals="jar:install"
      banner="Building"
      ignoreFailures="false"
    />

  </goal>

  <goal name="cleanall" description="Delete all target folders">
    <delete includeEmptyDirs="true">
      <fileset dir="${basedir}">
        <include name="*/target/**"/>
      </fileset>
    </delete>
  </goal>

  <goal 
    name="generic"
    description="Build each sub project with a particular goal. e.g. maven -Dgoals=site:deploy generic">

    <maven:reactor
      basedir="${basedir}"
      includes="*/project.xml"
      excludes="picogui/*,picoidea/*"
      goals="${goals}"
      banner="Building"
      ignoreFailures="false"
    />
  </goal>

</project>
