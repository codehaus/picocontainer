
<project default="nanocontainer-remoting:install" xmlns:maven="jelly:maven" xmlns:j="jelly:core" xmlns:util="jelly:util" xmlns:ant="jelly:ant">

  <ant:property file="project.properties"/>
  

  <goal name="nanocontainer-remoting:install"
    description="Build the NanoContainer Remoting distribution." >

    <maven:reactor
      basedir="${basedir}" 
	  includes="common/project.xml,client/project.xml,server/project.xml,tools/project.xml"
	  goals="jar:install"  
	  banner="Installing:" 
	  ignoreFailures="false" />

	<!-- Carry out the integration tests -->
	<maven:reactor
      basedir="${basedir}" 
	  includes="integrationtests/project.xml" 
	  goals="test:test"  
	  banner="Integration Testing:" 
	  ignoreFailures="false" />

  </goal>

  <goal name="clean-all">
    <maven:reactor
      basedir="${basedir}"
      includes="common/project.xml,client/project.xml,server/project.xml,tools/project.xml,integrationtests/project.xml"
      goals="clean"
      banner="Cleaning subproject:"
      ignoreFailures="true"/>

  </goal>

</project>
