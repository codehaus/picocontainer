<project default="jar:install">

  <preGoal name="xdoc:jelly-transform">
    <attainGoal name="html2xdoc"/>
  </preGoal>

  <goal name="cvs:make-patch" description="Creates a patch of *your* changes">
    <cvs command="-q diff -b -u -N" output="patch.txt"/>
    <echo>
      Please create a new issue in PicoContainer's JIRA: 
      http://jira.codehaus.org/secure/BrowseProject.jspa?id=10120
      Then attach the patch.txt file.
      If your patch consists of entirely new files too, please zip them
      up and attach them too.
      
      If your patch includes JUnit tests and a decent description,
      you increase the chance of having the patch applied by some
      of the committers.
    </echo>    
  </goal>

  <!--
   ! Maven doesn't tell us whether compile was ok.
   ! We'll work around it by creating a file and delete
   ! it when compile is done. If compile fails, the file
   ! is still there, and the continuous-integration.sh
   ! script can figure out whether compile was ok.
  -->
  <preGoal name="java:compile">
    <touch file="${maven.build.dir}/compiling"/>
  </preGoal>

  <postGoal name="java:compile">
    <delete file="${maven.build.dir}/compiling"/>
  </postGoal>
</project>