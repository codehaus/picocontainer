<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
</head>
<body>
<h1>Inversion of Control<br>
</h1>
What is this all about ?<br>
<br>
Well it is a design pattern that also sometimes called the Hollywood
Patten ("Don't call us we'll call you") or the Chain of Command pattern.<br>
<br>
Simply put, a component does not go off and get other components that
it needs on instantiation, it instead declares them to its boss, and
the boss supplies them.<br>
<h2>Basics</h2>
Without worrying about the generationos of IoC that let us arrive at
the PicoContainer design, Here is the simplest possible IoC component :<br>
<br>
<pre>public interface Apple {</pre>
<pre>&nbsp; // methods</pre>
<pre>}</pre>
<pre><br>public interface Orange {</pre>
<pre>&nbsp; // methods</pre>
<pre>}</pre>
<pre><br>public class AppleImpl implements Apple {</pre>
<pre>&nbsp; private Orange orange;</pre>
<pre>&nbsp; public AppleImpl(Orange orange) {</pre>
<pre>&nbsp;&nbsp;&nbsp; this.orange = orange;</pre>
<pre>&nbsp; }</pre>
<pre>&nbsp; // other methods</pre>
<pre>}</pre>
<br>
Here are some common smells that lead you refactor to IoC<br>
<br>
<pre>public class AppleImpl implements Apple{</pre>
<pre>&nbsp; private Orange orange;</pre>
<pre>&nbsp; public Apple() {</pre>
<pre>&nbsp;&nbsp;&nbsp; this.orange = OrangeImpl.getOrange();</pre>
<pre>&nbsp; }</pre>
<pre>&nbsp; // other methods</pre>
<pre>}</pre>
<br>
The problem is that you are tied to OrangleImpl for provision of Orange
services.&nbsp; Simply put, the above cannot be a component, it's an
application. All hard coded. Not reusable. It is going to be very
difficult to have multiple instances in the same classloader with
different assembly.<br>
<br>
Here are some other smells along the same line :<br>
<br>
<pre>public class AppleImpl implements Apple {</pre>
<pre>  private static Orange orange = OrangeFactory.getOrange();</pre>
<pre>&nbsp; public Apple() {</pre>
<pre>&nbsp; }</pre>
<pre>&nbsp; // other methods</pre>
<pre>}</pre>
<h2>Configuration</h2>
Sometimes we see configuration like so ...<br>
<pre>public class BigFatComponent {</pre>
<pre>&nbsp;&nbsp;String config01;</pre>
<pre>&nbsp;&nbsp;String config02;</pre>
<pre>&nbsp;&nbsp;public BigFatComponent() {</pre>
<pre>&nbsp;&nbsp;&nbsp;&nbsp;ResourceFactory resources = new ResourceFactory(new File("mycomp.properties"));</pre>
<pre>&nbsp;&nbsp;&nbsp;&nbsp;config01 = resources.get("config01");</pre>
<pre>&nbsp;&nbsp;&nbsp;&nbsp;config02 = resources.get("config02");</pre>
<pre>&nbsp;&nbsp;}</pre>
<pre>&nbsp; // other methods</pre>
<pre>}</pre>
In the IoC design, it might be better to see the following for simple
designs :<br>
<pre>public class BigFatComponent {</pre>
<pre>&nbsp;&nbsp;String config01;<br>  String config02;</pre>
<pre>&nbsp;&nbsp;public BigFatComponent(String config01, String config02) {</pre>
<pre>&nbsp;&nbsp;&nbsp;&nbsp;this.config01 = config01;</pre>
<pre>&nbsp;&nbsp;&nbsp;&nbsp;this.config02 = config02;</pre>
<pre>&nbsp;&nbsp;}</pre>
<pre>&nbsp; // other methods</pre>
<pre>}</pre>
Or this for more complex ones ..<br>
<pre>public interface BigFatComponentConfig {</pre>
<pre>&nbsp;&nbsp;void getConfig01();</pre>
<pre>&nbsp;&nbsp;void getConfig02();</pre>
<pre>}</pre>
<pre></pre>
<pre>public class BigFatComponent {</pre>
<pre>&nbsp;&nbsp;String config01;</pre>
<pre>&nbsp;&nbsp;String config02;</pre>
<pre>&nbsp;&nbsp;public BigFatComponent(BigFatComponentConfig config) {</pre>
<pre>&nbsp;&nbsp;&nbsp;&nbsp;this.config01 = config.getConfig01();</pre>
<pre>&nbsp;&nbsp;&nbsp;&nbsp;this.config02 = config.getConfig02();</pre>
<pre>&nbsp;&nbsp;}</pre>
<pre>&nbsp;&nbsp;// other methods</pre>
<pre>}</pre>
Where there could be many design for the implementation of
BigFatComponentConfig:<br>
<ul>
  <li>Hard codes (a default impl)</li>
  <li>One that takes config from an XML document (file, URL, inlined in
using class)</li>
  <li>Properties File.</li>
</ul>
It is the deployers or container makers choice.<br>
<br>
Of course, in all of these discussuions, it is important to point out
that Logging is a common exception to the IoC rule. Apache has two
static logging frameworks that are in common use - Commons-Logging and
Log4J.<br>
</body>
</html>
