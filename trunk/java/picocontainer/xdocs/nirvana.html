<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
</head>
<body>
<h1>PicoNirvana</h1>
In an ideal world we see PicoContainer principles being applied to a
lot of different container/component aspects of Java :<br>
<h2>Servlet</h2>
Currently the servlet spec advises that a servlet should..<br>
<ol>
  <li>Have a public empty contructor</li>
  <li>On instantiation, not spawn threads, or mount its own socket
servers.</li>
  <li>Only be able to load classes distributed in its WAR file, present
in the Servlet API, or J2SE.<br>
  </li>
</ol>
It would be quite cool, if the servlet container could determine the
needs of a servlet as a component before instantiation. The servlet was
allowed to get dependant component instances via its constructor.&nbsp;
The need for servlet developers to break (2) above would be diminished
because there is some place hier up the container tree for fatter
components, that can provide services to request oriented
servlets.&nbsp; The class visibity advice (for servlet container
writers), would be relaxed too, allowing classes not supplied in the
WAR file to be compiled against and delivered by the containing
environment.<br>
<br>
<pre>public class PicoServletExample extends HttpServlet {</pre>
<pre>&nbsp;&nbsp;&nbsp; private StockQuoteService stockQuoteService;</pre>
<pre>&nbsp;&nbsp;&nbsp; public PicoServletExample(StockQuoteService sqs) {</pre>
<pre>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; stockQuoteService = sqs</pre>
<pre>&nbsp;&nbsp;&nbsp; }</pre>
<pre>&nbsp;&nbsp;&nbsp; public void doGet(HttpServletRequest request, HttpServletResponse response) throws IOException, ServletException {</pre>
<pre>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; response.setContentType("text/html");</pre>
<pre>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; PrintWriter out = response.getWriter();</pre>
<pre>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; out.println("&lt;html&gt;&lt;body&gt;");</pre>
<pre>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; out.println("Microsoft's Current Price =" + stockQuoteService.getQuote("MSFT"));</pre>
<pre>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; out.println("&lt;/body&gt;&lt;/html&gt;");</pre>
<pre>&nbsp;&nbsp;&nbsp; }</pre>
<pre>}<br><br></pre>
This may seem far fetched, but it is entirely possible given the number
of Open Source Servlet containers.<br>
<h2>Applet</h2>
As for the servlet example, it would be nice for Applet to require that
their container resolves component dependencies.&nbsp; This rather than
have to do a fairly open ended JNDO or RMI lookup of a remote
service.&nbsp; The implemetation is a component that may have several
manifestations.&nbsp; A RMI Remote real example is where you might be
headed as you write the application&nbsp; In the interim, the team may
code and deliver various quick win solutions - a) Hard coded fake
StockQuoteService, b) some real implementation that steals data from
http://quotes.nasdaq.com for display in the applet, c) some
centralized/proxied version of (b), d) a MockStockQuteService for Unit
testing (not withstanding the fact that AppletUnit has not been written
yet).<br>
<br>
<pre>public class PicoAppletExample extends Applet {</pre>
<pre>&nbsp;&nbsp;&nbsp; private StockQuoteService stockQuoteService;</pre>
<pre>&nbsp;&nbsp;&nbsp; public PicoAppletExample(StockQuteService sqs) {</pre>
<pre>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; stockQuoteServic = sqs; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;  </pre>
<pre>&nbsp;&nbsp;&nbsp; }</pre>
<pre>&nbsp;&nbsp;&nbsp; public void init() {</pre>
<pre>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; // lay out trading GUI etc.</pre>
<pre>&nbsp;&nbsp;&nbsp; }</pre>
<pre>&nbsp;&nbsp;&nbsp; public void start() {</pre>
<pre>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; //whatever</pre>
<pre>&nbsp;&nbsp;&nbsp; }</pre>
<pre>&nbsp;&nbsp;&nbsp; </pre>
<pre>&nbsp;&nbsp;&nbsp; public void stop() {</pre>
<pre>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; // whatever</pre>
<pre>&nbsp;&nbsp;&nbsp; }</pre>
<pre>&nbsp;&nbsp;&nbsp; public String getAppletInfo() {</pre>
<pre>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; return "Hello";</pre>
<pre>&nbsp;&nbsp;&nbsp; }&nbsp;&nbsp;  </pre>
<pre>}</pre>
Sadly, this remains far fetched, due to a dearth of Open Source Servlet
containers.<br>
<h2>Enterprise Bean</h2>
Same story :<br>
<br>
<pre>
public interface StockQuoteService {</pre>
<pre>
&nbsp;&nbsp;&nbsp; void BigDecimal getQuote(String stockTicker);</pre>
<pre>
}</pre>
<pre>public class DefaultStockQuoteService implements StockQuoteService {</pre>
<pre>&nbsp;&nbsp;&nbsp; QuoteRecorder quoteRecorder;</pre>
<pre>&nbsp;&nbsp;&nbsp; public DefaultStockQuoteService(QuoteRecorderquoteRecorder) {</pre>
<pre>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; this.quoteRecorder =quoteRecorder;</pre>
<pre>&nbsp;&nbsp;&nbsp; }</pre>
<pre>&nbsp;&nbsp;&nbsp; public void BigDecimal getQuote(String stockTicker) {</pre>
<pre>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; quoteRecorder.recordQuote(stockTicker);</pre>
<pre>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; return new BigDecimal()// TODO - makereal</pre>
<pre>&nbsp;&nbsp;&nbsp; }</pre>
<pre>
}</pre>
<h2>Desktop Operating System</h2>
Getting boring now :<br>
<br>
<pre>public class QuotePanel extends JPanel implements {</pre>
<pre>&nbsp;&nbsp;&nbsp; StockQuoteService stockQuoteService;</pre>
<pre>&nbsp;&nbsp;&nbsp; public QuotePanel(StockQuoteService sqs) {</pre>
<pre>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; this.stockQuoteService = sqs;</pre>
<pre>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; this.add(new JTextField(""),BorderLayout.CENTER);</pre>
<pre>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; //etc</pre>
<pre>&nbsp;&nbsp;&nbsp; }</pre>
<pre>}</pre>
<br>
</body>
</html>
