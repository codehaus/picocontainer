<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
  <title>Making components compatible with Avalon-Framework</title>
</head>
<body>
<h3>Introduction</h3>
<br>
Apache's Avalon's component specification is enshrined in a number of
interfaces. Blah blah.&nbsp; <br>
<br>
This document blah blah illustrated blah legacy compatability with
Avalon-Framework.&nbsp; XML blah blah.<br>
<h4>Example component API</h4>
<div style="margin-left: 40px;">public interface Engine {<br>
&nbsp; void runEngine();<br>
}<br>
public interface Persistor {<br>
&nbsp; void persist(String key, Object data);<br>
}<br>
</div>
<br>
<span style="font-weight: bold;">Consider the following PicoContainer
implementation</span><br>
<br>
<div style="margin-left: 40px;">public class EngineImpl implements
Engine {<br>
&nbsp; Persistor persistor;<br>
&nbsp; String persistenceKey;<br>
&nbsp; Object persistable;<br>
&nbsp; public void EngineImpl(Persistor persistor, String
persistenceKey) {<br>
&nbsp;&nbsp;&nbsp; this.persistor = persistor;<br>
&nbsp;&nbsp;&nbsp; this.persistorKey = persistorKey;<br>
&nbsp;&nbsp;&nbsp; persistable = new Object(); // not very 'heavy' we
appreciate.<br>
&nbsp; }<br>
&nbsp; public void runEngine() {<br>
&nbsp; {<br>
&nbsp;&nbsp;&nbsp; persistor.persist(persistorKey, persistable);<br>
&nbsp; }<br>
}<br>
</div>
<h4>The same component natively written for Apache Avalon</h4>
<div style="margin-left: 40px;">public class AvalonEngine implements
Engine, Servicable, Configurable,
Initializable {<br>
&nbsp; Persistor persistor;<br>
&nbsp; String persistenceKey;<br>
&nbsp; Object persistable;<br>
&nbsp; public void service (ServiceManager sm) throws ServiceException {<br>
&nbsp;&nbsp;&nbsp; this.persistor = (Persistor) sm.lookup("Persistor");<br>
&nbsp; }<br>
&nbsp; public void configure(Configuration conf) {<br>
&nbsp;&nbsp;&nbsp; this.persistorKey =
conf.getAttribute("persistorKey");<br>
&nbsp; }<br>
&nbsp; public void initialize() {<br>
&nbsp;&nbsp;&nbsp; persistable = new Object(); // not very 'heavy' we
appreciate.&nbsp;&nbsp; <br>
&nbsp; }<br>
&nbsp; public void runEngine() {<br>
&nbsp; {<br>
&nbsp;&nbsp;&nbsp; persistor.persist(persistorKey, persistable);<br>
&nbsp; }<br>
}<br>
</div>
<br>
<span style="font-weight: bold;">An alternate wrapping strategy for
Apache Avalon compatability.</span><br>
<br>
<div style="margin-left: 40px;">public class AvalonEngine implements
Engine, Servicable, Configurable,
Initializable {<br>
&nbsp; private Engine engine;<br>
&nbsp; // temporary<br>
&nbsp; private Persistor persistor;<br>
&nbsp; private String persistenceKey;<br>
&nbsp; public void service (ServiceManager sm) throws ServiceException {<br>
&nbsp;&nbsp;&nbsp; this.persistor = (Persistor) sm.lookup("Persistor");<br>
&nbsp; }<br>
&nbsp; public void configure(Configuration conf) {<br>
&nbsp;&nbsp;&nbsp; this.persistorKey =
conf.getAttribute("persistorKey");<br>
&nbsp; }<br>
&nbsp; public void initialize() {<br>
&nbsp;&nbsp;&nbsp; engine = new EngineImpl(persistorm persistenceKey);<br>
&nbsp; }<br>
&nbsp; public void runEngine() {<br>
&nbsp; {<br>
&nbsp;&nbsp;&nbsp; engine.runEngine();<br>
&nbsp; }<br>
}<br>
</div>
<br>
<br>
</body>
</html>
