<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
</head>
<body>
<h2>Overview</h2>
In recent years different approaches have emerged to deliver an IoC
vision.&nbsp; Latter types have concentrated on simplicity and
transparency.&nbsp; <br>
<h2>IoC Types - Family Tree<br>
</h2>
Inversion of Control
<br>
- Dependency Injection (former type 3)<br>
&nbsp; &nbsp; - Constructor Dependency Injection<br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="font-style: italic;">Examples
:</span><br>
&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; <span
 style="font-style: italic;">PicoContainer<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Spring Framework<br>
</span>&nbsp; &nbsp; - Setter Dependency Injection
(former type 2)<br>
<span style="font-style: italic;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
Examples :</span><br style="font-style: italic;">
<span style="font-style: italic;">&nbsp;&nbsp; &nbsp;&nbsp;
&nbsp;&nbsp;&nbsp; Spring Framework</span><br
 style="font-style: italic;">
<span style="font-style: italic;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
PicoContainer</span><br style="font-style: italic;">
&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp; &nbsp; - Interface Driven Setter
Dependency Injection
<br>
<span style="font-style: italic;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;
&nbsp; &nbsp; Examples :</span><br style="font-style: italic;">
<span style="font-style: italic;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
&nbsp; &nbsp;&nbsp; &nbsp; XWork</span><br style="font-style: italic;">
<span style="font-style: italic;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
WebWork 2</span><br style="font-style: italic;">
&nbsp; &nbsp; - Field Dependency Injection
<br>
<span style="font-style: italic;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
Examples :</span><br style="font-style: italic;">
<span style="font-style: italic;">&nbsp; &nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp; Plexus (to be confirmed)</span><br
 style="font-style: italic;">
- Contextualized Dependency Lookup
<br>
&nbsp; &nbsp; - Pull approach (registry concept)
<br>
<span style="font-style: italic;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
Examples :</span><br style="font-style: italic;">
<span style="font-style: italic;">&nbsp; &nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp; EJB that leverages JNDI </span><br
 style="font-style: italic;">
<span style="font-style: italic;">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;
&nbsp;&nbsp; Servlets that leveraging JNDI</span><br
 style="font-style: italic;">
&nbsp; &nbsp; - Push approach
(former type 1)<br>
<span style="font-style: italic;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
Examples :</span><br style="font-style: italic;">
<span style="font-style: italic;">&nbsp;&nbsp; &nbsp;&nbsp;
&nbsp;&nbsp;&nbsp; Servlets that leverage ServletContext</span><br
 style="font-style: italic;">
<span style="font-style: italic;">&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;
&nbsp; Avalon
</span><br style="font-style: italic;">
<span style="font-style: italic;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp; JContainer's DNA
</span><br style="font-style: italic;">
<span style="font-style: italic;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
OSGi (to be confirmed)</span><br style="font-style: italic;">
<span style="font-style: italic;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;
&nbsp; Keel (to be confirmed)</span><br>
<h2>Examples of Common Types<br>
</h2>
<h3>Constructor Dependency Injection</h3>
This is where a dependency is handed into a component via its
constructor :<br>
<pre style="margin-left: 40px;">public interface Orange {<br>&nbsp; // methods<br>}<br><br>public class AppleImpl implements Apple {<br>&nbsp; private Orange orange;<br>&nbsp; public AppleImpl(Orange orange) {<br>&nbsp;&nbsp;&nbsp; this.orange = orange;<br>&nbsp; }<br>&nbsp; // other methods<br>}</pre>
<h3>Setter Dependency Injection</h3>
This is where dependencies are injected into a component via setters :<br>
<pre style="margin-left: 40px;">public interface Orange {<br>&nbsp; // methods<br>}<br><br>public class AppleImpl implements Apple {<br>&nbsp; private Orange orange;<br>&nbsp; public void setOrange(Orange orange) {<br>&nbsp;&nbsp;&nbsp; this.orange = orange;<br>&nbsp; }<br>&nbsp; // other methods<br>}</pre>
<h3>Contextualized Dependency Lookup (Push Approach)<br>
</h3>
This is where dependencies are looked up from a container that is
managing the component :<br>
<pre style="margin-left: 40px;">public interface Orange {<br>&nbsp; // methods<br>}<br><br>public class AppleImpl implements Apple, DependencyProvision {<br>&nbsp; private Orange orange;<br>&nbsp; public void doDependencyLookup(DependencyProvider dp) throws DependencyLookupExcpetion{<br>&nbsp;&nbsp;&nbsp; this.orange = (Orange) dp.lookup("Orange");<br>&nbsp; }<br>&nbsp; // other methods<br>}</pre>
<h2>Terms - Service, Module, Component &amp; Class<br>
</h2>
Component is the correct name for things managed in an IoC sense.&nbsp;
However very small ordinary classes are manageable using IoC tricks,
though this is for the very brave or extremists :-)<br>
<br>
A component many have dependencies on others.&nbsp; Thus dependency is
the term we prefer to describe the needs of a component.<br>
<br>
Service as a term is very popular presently. We think it has as it has
marshaling/remoting
connotations. Think of Web Service, Database service, Mail service. All
of these have a concept of adaptation and transport.&nbsp; Typically a
language neutral&nbsp; form for a request is passed over the
wire.&nbsp; In the case of the Web Service method requests are
marshaled to SOAP XML and forward to a suitable HTTP server for
processing.&nbsp; Most of the time an application coder is hidden from
the client/server and marshaling ugliness by a toolkit or API.<br>
<br>
Module and Modular holds connotations in the non-OO development world.
Modularization is good thing, but not just for OO languages.<br>
<h2><span style="font-weight: bold;">Obsoleted Terms </span></h2>
Type 1,2 and 3 IoC were coined in 2003 and published widely.<br>
<br>
Type 1 becomes Contextualized Dependency Lookup
<br>
Type 2 becomes Setter Dependency Injection
<br>
Type 3 becomes Constructor Dependency Injection
<br>
<h2>Injection versus Contextualized Lookup</h2>
Dependency Injection is non-invasive.&nbsp; Typically this means that
components can
be used without a container and, ignoring life cycle, have no import
requirements from an applicable framework.
<br>
<br>
Contextualized Dependency Lookup is invasive.&nbsp; Typically this
means components must be
used inside a container, and requires the component coder to import
from an applicable framework jar.
<br>
<br>
Note that Avalon (and all former type-1 designs) are not Dependency
Injector at all, they are Contextualized&nbsp; Dependency Lookup.<br>
<h2>What's wrong with JNDI ?</h2>
With plain JNDI, lookup can be done in a classes' static initialiser,
in the constuctor or any method including the finaliser.&nbsp; Thus
there is no control (refer C of IoC). With JNDI used under EJB control,
and concerning only components looked up from that beans sisters
(implicitly under the same container's control), the specification
indicates that the JNDI lookup should only happen at a certain moment
in the startup of an EJB application, and only from a set of beans
declared in ejb-jar.xml.&nbsp; Hence for EJB containers, the control
element <span style="font-style: italic;">should </span>be
back.&nbsp; Should, of course, means that many bean containers have no
clue as to when lookups are actually being done, and apps work by
accident of deployment.&nbsp; Allowing it for static is truly evil. It
means that a container could merely be looking at classes with
reflection in some early setup state, and the bean could be going off
and availing of remote and local services and components.&nbsp; Thus
depending whether JNDI is being used in an Enterprise Java Bean or in a
plain class, it is either an example of IoC or not.<br>
<br>
<br>
<small>Authors - Paul Hammant, Aslak Hellesoy, Rod Johnson, Mike Royle
(all present in face to face session 7th Jan 2004)<br>
</small><small>Input and pattern characterization from Martin Fowler
(by email). </small><br>
</body>
</html>
